define("app/login/header",function(){angular.module("login").controller("HeaderCtrl",function(){})});
;define("app/login/login",function(require){function e(e,o,r,i,t){function a(e,n){(e||n)&&g()}function g(){"Quick"!==e.loginBean.mode&&e.loginForm.entName.$error.required?s("entNameRequire"):!e.loginBean.account&&e.loginForm.account.$error.required?s("accountRequire"):e.loginForm.password.$error.required?s("passwordRequire"):e.formError=""}function c(n){i.setUserLoginCookies("Quick"===e.loginBean.mode,e.loginBean.entName,e.loginBean.account,e.loginBean.clientId,n)}function s(n){var o=e.errorMap[n];o&&(e.formError=o)}e.loginBean=new t,e.login=!1,e.formError="",e.lang=webhelper.getLang(),e.switchLoginTxt="msgOldLogin",e.loginBtnText=r("msg1"),e.onUserLogin=function(){return"Account"!==e.loginBean.mode||e.loginBean.entName&&$.trim(e.loginBean.entName).length?(e.commit=!0,e.loginBtnText="登录中...",e.loginBean.signin().then(function(n){var o=webhelper.getUrlEncodedKey("from")||"";if("app.oatos.com"===location.host&&n.vip)location.assign("http://vip.oatos.com/auth-oatos?"+$.param({ut:n.token,v:n.vip?1:0,ci:e.loginBean.clientId,from:o}));else{if(c(n.token),!o)return location.assign(i.getWebsiteUrl()),!0;switch(o){case"admin":location.assign(i.getAdminUrl());break;case"buy":location.assign(i.getBuyUrl());break;case"2015":location.assign(i.getPromoteUrl());break;case"meeting":location.assign(i.getMeetingUrl())}}})["catch"](function(o){s(o),e.commit=!1,e.loginBtnText=r("msg1"),log.debug(n," signin: ",o,", formError: ",e.formError)}),!1):(s("entNameRequire"),!1)},e.onSwitchLang=function(n){r.uses(n),e.$parent.lang=n,i.setCookie("lang",n),$("body").removeClass("zh_CN zh_TW en_US").addClass(n)},e.onSwitchLogin=function(){"Quick"===e.loginBean.mode?(e.loginBean.mode="Account",e.switchLoginTxt="msgNewLogin"):(e.loginBean.mode="Quick",e.switchLoginTxt="msgOldLogin")},e.errorMap={errorWrongPWD:"密码错误",errorWrongAccount:"账号未注册",errorUserLocked:"用户被锁定，禁止登陆",error500:"登录失败! 请稍后重试",entNameRequire:"企业名称不能为空",accountRequire:"账号不能为空",passwordRequire:"密码不能为空",errorAuditFail:r("msgServiceExpire"),errorUserNotActive:r("msgAccountNotActive"),errorUserDeleted:r("msgAccountDeleted"),errorNotAuthed:r("msgUnAuthErr"),errorExpirationTimeOver:r("msgActiveUserErr")},e.$watch("loginBean.entName",a),e.$watch("loginBean.account",a),e.$watch("loginBean.password",a),$("body").removeClass("zh_CN zh_TW en_US").addClass(e.lang)}{var n="[LoginCtrl]-";require("security")}angular.module("login").controller("LoginCtrl",["$scope","$log","$translate","constants","LoginBean",e])});
;define("app/login/main",function(require){angular.module("login",["ngRoute","ngTranslate","commons.services","commons.models","commons.filters","commons.directives"]),require("app/login/login"),require("app/login/header"),angular.module("login").config(["$translateProvider",function(o){require("app/support/services/message")(o),o.uses("zh_CN")}]),angular.module("login").config(["$routeProvider","$logProvider","$translateProvider",function(o,e,n){"use strict";e.debugEnabled(!0),n.uses(webhelper.getLang()),o.when("/",{controller:"LoginCtrl",templateUrl:"loginform.html"}).otherwise({redirectTo:"/"})}]),angular.module("login").run(["$rootScope","constants",function(o,e){o._=_,o.constants=e,window.cache={token:e.getCookie("ut"),userId:void 0,showType:e.getCookie("stp")||"list",clientId:e.getCookie("ci")||webhelper.guid()}}]),angular.bootstrap(document,["login"])});